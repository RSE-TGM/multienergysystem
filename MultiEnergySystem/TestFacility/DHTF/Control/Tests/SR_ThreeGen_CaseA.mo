within MultiEnergySystem.TestFacility.DHTF.Control.Tests;
model SR_ThreeGen_CaseA "This test model considers the step response using as a base the generating plant with Gas Boiler, Electric Boiler & CHP as heat generators"
  extends DHTF.Control.Tests.SR_TwoGen_CaseA(
    redeclare replaceable DHTF.Control.OpenLoopActuators.OLA_ThreeGen_CaseA actuator(
      useRealExpression=false,
      dtheta_FCVC01=[0,-1; 1e6,-1],
      dtheta_FCVC02=[0,-1; 1e6,-1],
      domega_P901=[0,(f_P901 - 50)/50; 1e3,(f_P901 - 50)/50; 1e3,(f_P901 - 50 + f_P901_delta)/50; 1e6,(f_P901 - 50 + f_P901_delta)/50],
      dtheta_FCV901=[0,0; 1e6,0],
      dTout_GB101=[0,0; 1e6,0],
      domega_P101=[0,(f_P101 - 50)/50; 1e3,(f_P101 - 50)/50; 1e3,(f_P101 - 50 + f_P101_delta)/50; 1e6,(f_P101 - 50 + f_P101_delta)/50],
      dtheta_FCV101=[0,0; 1e6,0],
      dtheta_FCV701=[0,(theta_FCV701 - 1)/1; 1e3,(theta_FCV701 - 1)/1; 1e3,(theta_FCV701 - 1 + theta_FCV701_delta)/1; 1e6,(theta_FCV701 - 1 + theta_FCV701_delta)/1],
      dtheta_FCV711=[0,(theta_FCV711 - 1)/1; 1e3,(theta_FCV711 - 1)/1; 1e3,(theta_FCV711 - 1 + theta_FCV711_delta)/1; 1e6,(theta_FCV711 - 1 + theta_FCV711_delta)/1],
      dtheta_FCV721=[0,(theta_FCV721 - 1)/1; 1e3,(theta_FCV721 - 1)/1; 1e3,(theta_FCV721 - 1 + theta_FCV721_delta)/1; 1e6,(theta_FCV721 - 1 + theta_FCV721_delta)/1],
      dtheta_FCV731=[0,(theta_FCV731 - 1)/1; 1e3,(theta_FCV731 - 1)/1; 1e3,(theta_FCV731 - 1 + theta_FCV731_delta)/1; 1e6,(theta_FCV731 - 1 + theta_FCV731_delta)/1],
      dtheta_TCV701=[0,(theta_TCV701 - 1)/1; 1e3,(theta_TCV701 - 1)/1; 1e3,(theta_TCV701 - 1 + theta_TCV701_delta)/1; 1e6,(theta_TCV701 - 1 + theta_TCV701_delta)/1],
      dtheta_TCV711=[0,(theta_TCV711 - 1)/1; 1e3,(theta_TCV711 - 1)/1; 1e3,(theta_TCV711 - 1 + theta_TCV711_delta)/1; 1e6,(theta_TCV711 - 1 + theta_TCV711_delta)/1],
      dtheta_TCV721=[0,(theta_TCV721 - 1)/1; 1e3,(theta_TCV721 - 1)/1; 1e3,(theta_TCV721 - 1 + theta_TCV721_delta)/1; 1e6,(theta_TCV721 - 1 + theta_TCV721_delta)/1],
      dtheta_TCV731=[0,(theta_TCV731 - 1)/1; 1e3,(theta_TCV731 - 1)/1; 1e3,(theta_TCV731 - 1 + theta_TCV731_delta)/1; 1e6,(theta_TCV731 - 1 + theta_TCV731_delta)/1],
      dtheta_FCVR01=[0,0; 1e6,0],
      dTout_RR01=[0,(Tout_RR01 - 15)/(100 + 273.15); 1e6,(Tout_RR01 - 15)/(100 + 273.15)],
      domega_P401=[0,(f_P401 - 50)/50; 1e3,(f_P401 - 50)/50; 1e3,(f_P401 - 50 + f_P401_delta)/50; 1e6,(f_P401 - 50 + f_P401_delta)/50],
      dtheta_FCV401=[0,0; 1e6,0],
      domega_P501=[0,(f_P501 - 50)/50; 1e3,(f_P501 - 50)/50; 1e3,(f_P501 - 50 + f_P501_delta)/50; 1e6,(f_P501 - 50 + f_P501_delta)/50]),
    redeclare replaceable Export.Linearization.CentralisedSystemGBEBCHP_InitForward plant(
      h_FT701_rackL2L3=-0.85,
      h_FT711_rackL3L4=-1,
      h_FT721_rackL4L5=-1,
      h_FT731_rackL6L7=-1.25,
      thetaFCVC01Offset(fixInput=false, fixOffset=true),
      thetaFCVC02Offset(fixInput=false, fixOffset=true),
      thetaFCV901Offset(fixInput=false, fixOffset=true),
      thetaFCV101Offset(fixInput=false, fixOffset=true),
      thetaTCV701Offset(fixInput=false, fixOffset=true),
      thetaTCV711Offset(fixInput=false, fixOffset=true),
      thetaTCV721Offset(fixInput=false, fixOffset=true),
      thetaTCV731Offset(fixInput=false, fixOffset=true),
      omegaP901Offset(fixInput=false, fixOffset=true),
      omegaP101Offset(fixInput=false, fixOffset=true),
      ToutRR01Offset(fixInput=false, fixOffset=true),
      TTR02_nom=373.15,
      thetaFCV401Offset(fixInput=false, fixOffset=true),
      omegaP401Offset(fixInput=false, fixOffset=true),
      omegaP501Offset(fixInput=false, fixOffset=true),
      S500(PL_S500_P501_PT501(h=2.05*0)),
      S900(h_FCV901_PT902=2.5*0.1),
      PL_S500_rCD_hot(h=3*0),
      PL_S400_rCD_hot(h=1.2*0)),
    theta_TCV701=1,
    theta_TCV711=1,
    theta_TCV721=1,
    theta_TCV731=1,
    f_P901=30,
    f_P101=30,
    f_P401=30,
    f_P101_delta=0);
  parameter Real f_P501 = 30;
  parameter Real f_P501_delta = 0;
  annotation (
    experiment(StopTime = 100, Tolerance = 1e-06, __Dymola_Algorithm = "Dassl"));
end SR_ThreeGen_CaseA;
